# CicadaGallery - 動画ギャラリープレイヤー

Rust製の動画管理・再生アプリケーションです。

## 機能

- 📁 **ファイル・ディレクトリ追加**: 動画ファイルを個別またはフォルダごとに追加
- 🏷️ **タグ付け**: 動画にタグを付けて整理
- 📂 **フォルダ分け**: 動画を仮想フォルダで分類
- ⭐ **お気に入り機能**: お気に入りの動画をマーク
- 🔍 **検索機能**: タイトルやタグで動画を検索
- 💾 **データ永続化**: 動画情報を自動保存
- 🎬 **シーン検出**: 動画のシーン変化を自動検出してサムネイル生成
- 🖼️ **サムネイル生成**: FFmpegによる自動サムネイル生成
- 🌍 **多言語対応**: 英語、日本語、中国語に対応
- 🎨 **カスタマイズ可能**: ダークモード、サムネイルサイズ調整など

## サポートする動画形式

- MP4, AVI, MKV, MOV, WMV, FLV, WebM, M4V, MPG, MPEG

## 依存関係

このアプリケーションは以下の外部ツールを必要とします：

### MPV (必須)

動画再生にMPVを使用しています。

1. [MPV公式サイト](https://mpv.io/)から最新版をダウンロード
2. ダウンロードしたファイルを解凍
3. `mpv.exe` をプロジェクトの `mpv/` フォルダに配置

または、プロジェクト内のインストーラーを使用：
```bash
cd mpv/installer
./mpv-install.bat
```

### FFmpeg (推奨)

サムネイル生成と動画解析に使用されます。

1. [FFmpeg公式サイト](https://ffmpeg.org/download.html)からWindows版をダウンロード
2. システムPATHに追加するか、実行ファイルと同じディレクトリに配置

## 実行方法

```bash
cd CicadaGallery
cargo run
```

## ビルド

```bash
cargo build --release
```

実行可能ファイルは `target/release/cicada_gallery.exe` に生成されます。

## 使い方

1. **ファイル追加**: トップバーの「📁 ファイル追加」ボタンをクリック
2. **フォルダ追加**: トップバーの「📂 フォルダ追加」ボタンをクリック
3. **動画再生**: サムネイルまたはタイトルをクリック（システムのデフォルトプレイヤーで再生）
4. **お気に入り**: ⭐ボタンをクリックしてお気に入りに追加
5. **フィルタリング**: サイドバーでフォルダやタグでフィルタリング
6. **表示切替**: グリッド表示とリスト表示を切り替え可能

## 技術スタック

- **GUI**: egui / eframe
- **シリアライゼーション**: serde / serde_json
- **ファイルダイアログ**: rfd
- **日時処理**: chrono

## データ保存場所

動画データベースと設定は以下に保存されます：
- Windows: `%LOCALAPPDATA%\CicadaGallery\database.json`
- 設定ファイル: `%LOCALAPPDATA%\CicadaGallery\settings.json`

## 言語設定

1. トップバーの「Options」（オプション）ボタンをクリック
2. 「Language」セクションで希望の言語を選択
   - English (英語)
   - 日本語
   - 中文 (中国語)
3. 設定は自動的に保存されます

### 新しい言語の追加方法

`src/i18n.rs`ファイルの`load_translations`メソッドに翻訳を追加してください：

```rust
self.add("key", "English", "日本語", "中文");
```

## 今後の拡張予定

- より多くの言語サポート
- プレイリスト機能
- 動画のメタデータ取得
- より詳細な検索・フィルタ機能
- ビデオ編集機能
